<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OneSignal Status Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>

<style>
body {
  font-family: Arial;
  text-align: center;
  margin-top: 60px;
}
.status {
  font-size: 20px;
  font-weight: bold;
  margin: 20px;
}
.green { color: green; }
.orange { color: orange; }
.red { color: red; }
button {
  padding: 12px 22px;
  font-size: 16px;
  margin: 8px;
}
</style>

<script>
window.OneSignal = window.OneSignal || [];

OneSignal.push(function () {
  OneSignal.init({
    appId: "f8997d04-4368-40e0-84ff-b8f21cf10cc5",
    notifyButton: { enable: true }
  });

  console.log("OneSignal initialized");
  updateStatus();
});

function updateStatus() {
  OneSignal.push(function () {
    OneSignal.getNotificationPermission().then(function (permission) {

      if (permission === "denied") {
        setStatus("ðŸš« Notifications Blocked", "red");
        return;
      }

      OneSignal.isPushNotificationsEnabled().then(function (enabled) {
        if (enabled) {
          setStatus("ðŸŸ¢ Subscribed", "green");
        } else {
          setStatus("ðŸ”´ Not Subscribed", "orange");
        }
      });
    });
  });
}

function setStatus(text, color) {
  const el = document.getElementById("status");
  el.textContent = text;
  el.className = "status " + color;
}

function subscribeUser() {
  OneSignal.push(function () {
    alert("Subscribe button clicked");

    OneSignal.isPushNotificationsEnabled().then(function (enabled) {
      if (enabled) {
        alert("Already subscribed");
      } else {
        OneSignal.showSlidedownPrompt();
      }
    });
  });
}

function unsubscribeUser() {
  OneSignal.push(function () {
    OneSignal.setSubscription(false);
    alert("Unsubscribed");
    updateStatus();
  });
}
</script>
</head>

<body>

<h1>ðŸ”” OneSignal Push Status</h1>

<div id="status" class="status">Checking...</div>

<button onclick="subscribeUser()">Subscribe</button>
<button onclick="unsubscribeUser()">Unsubscribe</button>

<p style="font-size:14px;color:#555">
Green = subscribed<br>
Orange = not subscribed<br>
Red = blocked
</p>

</body>
</html>
